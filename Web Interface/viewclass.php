<?php/*** begin the session ***/session_start();if(!isset($_SESSION['username'])){    $message = 'You must be logged in to access this page';	header("Location: index.php");}else{    try    {        $mysql_hostname = 'localhost';        $mysql_username = 'College_Bytes';        $mysql_password = 'Rhino';        $mysql_dbname = 'CollegeBytes';		$username = $_SESSION['username'];               if($username == false)        {            $message = 'Access Error';        }        else        {            $message = 'Welcome '.$username;        }    }    catch (Exception $e)    {        $message = 'We are unable to process your request. Please try again later"';    }}?><!DOCTYPE html><html lang="en-us"><head>  <title>CollegeBytes!</title>  <link rel="stylesheet" type="text/css" href="cbmain.css" />  </head>	<body>	<main>		<a name = "top"></a>		<!--/-->		<!--start of web content/-->		<header title="College Bytes"> 			<div class = "logo">				<a href="dashboard.php">					<img id="logoImage" src="images/logo.png" alt = "Logo" > 				</a>			</div>						<!--Big text with a faded image behind it is the first 			image seen when visiting the site/-->					<div class="navigation">					<nav>					<ul id = "mainList">						<li class = "dropDown" id="classes" ><a href = "#">Classes</a>							<ul>								<li><a href = "newclass.php">Add New Class</a></li>								<li><a href = "newstudentcontact.php">Add Contact</a></li>								<li><a href = "newteacher.php">Add Teacher</a></li>																							</ul>						</li>										<li class = "dropDown" id="contacts"><a href = "#">Obligation</a>							<ul>								<li><a href = "newassignment.php">Add New Class Obligation</a></li>							</ul>						</li>										<li class = "dropDown" id="alerts"><a href = "#">Menu</a>							<ul>								<li><a href = "learnmore.php">Learn More</a></li>								<li><a href = "faq.php">Frequently Asked Questions</a></li>															</ul>							</li>						<li class = "dropDown" id="alerts"><a href = "logout.php" >Log Out</a></li>					</ul>				</nav>			</div>		</header>						<div class = "content">			<?php //display class info				$link = mysqli_connect('localhost', 'College_Bytes', 'Rhino', 'CollegeBytes');				$class_Name = $_POST['className'];//SOMETHING< POST IM ASSUMINNG				 //edit class button						echo "<div class = 'Edit'>";				echo "<table id='Grid' style='width: 80%'><tr>";					echo "<th style='width: 50px'>Edit Class Information</th>";					echo "<th style='width: 50px'>Edit Teacher Information</th>";				echo "</tr>\n";				echo "<tr>"; 					//have taken out the fieldsets					echo "<td><form name = 'edit' id = 'edit' action = 'editclass.php' method ='post'><input type='submit' name= 'className' value= '" . $class_Name . "' /></form></td>";					echo "<td><form name = 'edit' id = 'edit' action = 'editteacher.php' method ='post'><input type='submit' name= 'className' value= '" . $class_Name . "' /></form></td>";					echo "</td></tr>\n";				echo "</table>";				echo "</div>";				if(!$link)					{						die('Connect failed: ' . mysqli_error());					}				$link->select_db("CollegeBytes");				$query = "SELECT * FROM Classes WHERE User_ID = '$username' AND Class_Name = '$class_Name'";				if($result = $link->query($query))					{											}				else					{						echo "Error retrieving information from CollegeBytes database: " . mysqli_error()."<br>";					}						echo "<div class = 'information'>";			echo "<h1>" . $class_Name . "</h1>"; 				$classquery = "SELECT * FROM Classes WHERE User_ID = '$username' AND Class_Name = '$class_Name'";				if($classresult = $link->query($classquery))					{					}				else					{						echo "Error retrieving information from CollegeBytes database: classes " . mysqli_error()."<br>";					}			//get the row into array				$classvals = mysqli_fetch_assoc($classresult);			echo "<p>Teacher: " . $classvals["Teach_ID"] . "</p>";				echo "<p>Room:    " . $classvals["Room"] . "</p>";			echo "<p>" . $classvals["Class_Desc"] . "</p>";			echo "<p>Start Time: " . $classvals["Start_Time"] . "</p>";			echo "<p>End Time:   " . $classvals["End_Time"] . "</p>";			?>												<?php //calculate average			//get the array of assignments in this class				$link = mysqli_connect('localhost', 'College_Bytes', 'Rhino', 'CollegeBytes');				if(!$link)					{						die('Connect failed: ' . mysqli_error());					}				$link->select_db("CollegeBytes");				$query = "SELECT * FROM Assignments WHERE User_ID = '$username' AND Class_Name = '$class_Name'";				if($assresult = $link->query($query))					{					}				else					{						echo "Error retrieving information from CollegeBytes database: assignment" . mysqli_error()."<br>";					}										$classquery = "SELECT * FROM Classes WHERE User_ID = '$username' AND Class_Name = '$class_Name'";				if($classresult = $link->query($classquery))					{					}				else					{						echo "Error retrieving information from CollegeBytes database: classes " . mysqli_error()."<br>";					}			//get the row into array				$classvals = mysqli_fetch_assoc($classresult);			$testweight = $classvals["Test_Weight"];			$quizweight = $classvals["Quiz_Weight"];			$hwweight = $classvals["HW_Weight"];			$labweight = $classvals["Lab_Weight"];								//average grades for each category			//instantiate to 0			$labavg = 0;			$testavg = 0;			$quizavg = 0;			$hwavg = 0;				//counters				$numtests = 0;				$numlabs = 0;				$numquizes = 0;				$numhws = 0;			//go through every grade and average			while($row = mysqli_fetch_assoc($assresult))				{				if($row["Grade_Type"] == "Test")					{					$testavg = $testavg + $row["Grade"];					$numtests = $numtests + 1;					}				if($row["Grade_Type"] == "Quiz")					{					$quizavg = $quizavg + $row["Grade"];					$numquizes = $numquizes + 1;					}				if($row["Grade_Type"] == "Home Work")					{					$hwavg = $hwavg + $row["Grade"];					$numhws = $numhws + 1;					}				if($row["Grade_Type"] == "Lab")					{					$labavg = $labavg + $row["Grade"];					$numlabs = $numlabs + 1;					}					//divide sum by num					if($numtests != 0)						$testavg = $testavg / $numtests;					if($numlabs != 0)						$labavg = $labavg / $numlabs;					if($numquizes != 0)						$quizavg = $quizavg / $numquizes;					if($numhws != 0)						$hwavg = $hwavg / $numhws;					}			//multiply by (weight divided by 100) for each category			$testavg = $testavg * ($testweight / 100);			$labavg = $labavg * ($labweight / 100);			$quizavg = $quizavg * ($quizweight / 100);			$hwavg = $hwavg * ($hwweight / 100);			//add up weighted averages				//if a weight is 0, it assumes a 100 for that section			if($testavg== 0)				$testavg = $testweight;			if($labavg== 0)				$labavg = $labweight;			if($quizavg== 0)				$quizavg = $quizweight;			if($hwavg== 0)				$hwavg = $hwweight;						//add them up			$total = $testavg + $labavg + $quizavg + $hwavg; 			//display			echo "<p>Current Average: " . $total . "</p>" ;			?>						<?php				echo "</div>";			?>									<div class="classes">				<h1>Assignments</h1>				<?php						//display a list of the classes from the class table with the username of username				$link = mysqli_connect('localhost', 'College_Bytes', 'Rhino', 'CollegeBytes');				if(!$link)					{						die('Connect failed: ' . mysqli_error());					}				$link->select_db("CollegeBytes");												$query = "SELECT * FROM Assignments WHERE User_ID = '$username' AND Class_Name = '$class_Name'";				if($result = $link->query($query))					{					}				else					{						echo "Error retrieving information from CollegeBytes database: " . mysqli_error()."<br>";					}					//to set up heading				echo "<table id='Grid' style='width: 80%'><tr>";				echo "<th style='width: 50px'>Assignment Name</th>";				echo "<th style='width: 50px'>Class</th>";				echo "<th style='width: 50px'>Due</th>";				echo "<th style='width: 50px'>Type</th>";				echo "<th style='width: 50px'>Grade</th>";				echo "<th style='width: 50px'>Edit</th>";				echo "</tr>\n";				//loop to display rows				while($row = mysqli_fetch_assoc($result))				{					echo "<tr>"; //literally the name in the databbase					echo "<td>" . $row["Assignment_Name"] . "</td>";					echo "<td>" . $row["Class_Name"] . "</td>";					echo "<td>" . $row["Due_Date"] . "</td>";					echo "<td>" . $row["Grade_Type"] . "</td>";					echo "<td>" . $row["Grade"] . "</td>";/////////////////////////////////////////////////////////////////////////IN PROGRESS CODE					echo "<form name = 'view' id = 'view' action = 'editassignment.php' method ='post'><td> <input type='submit' name= 'assName' value= ". $row["Assignment_ID"] ." /></td></form>";					echo "</td></tr>\n";																																		}				echo "</table>";				$link->close();			?>			<a href = "newassignment.php">Create New Assignment</a>				</div>			<div class = "contacts">			<?php //Display a list of the student contacs for this class										$linkstu = mysqli_connect('localhost', 'College_Bytes', 'Rhino', 'CollegeBytes');				if(!$linkstu)					{						die('Connect failed: ' . mysqli_error());					}				$linkstu->select_db("CollegeBytes");																$querystu = "SELECT * FROM Student_Contact WHERE User_ID = '$username' AND Class_Name = '$class_Name'";				if($resultstu = $linkstu->query($querystu))					{					}				else					{						echo "Error retrieving information from CollegeBytes database: " . mysqli_error()."<br>";					}					//to set up heading				echo "<table id='Grid' style='width: 80%'><tr>";				echo "<th style='width: 50px'>Contact Name</th>";				echo "<th style='width: 50px'>Phone Number</th>";				echo "<th style='width: 50px'>Email</th>";				echo "<th style='width: 50px'>Edit</th>";				echo "</tr>\n";				//loop to display rows				while($rowstu = mysqli_fetch_assoc($resultstu))				{					echo "<tr>"; //literally the name in the databbase					echo "<td>" . $rowstu["Student_Contact_Name"] . "</td>";					echo "<td>" . $rowstu["Student_Phone"] . "</td>";					echo "<td>" . $rowstu["Student_Email"] . "</td>";/////////////////////////////////////////////////////////////////////////IN PROGRESS CODE					echo "<form name = 'editcontact' id = 'editcontact' action = 'editstudentcontact.php' method ='post'><td> <input type='submit' name= 'contactName' value= ". $rowstu["Student_Contact_ID"] ." /></td></form>";					echo "</td></tr>\n";																																		}												echo "</table>";				$link->close();			?>			<a href = "newstudentcontact.php">Create New Contact</a>							</div>									<div class="notifications">				<h1>Notifications</h1>					<?php						//display a list of the classes from the class table with the username of username				$link = mysqli_connect('localhost', 'College_Bytes', 'Rhino', 'CollegeBytes');				if(!$link)					{						die('Connect failed: ' . mysqli_error());					}				$link->select_db("CollegeBytes");				//$query = "SELECT * FROM Assignments WHERE User_ID = '$username'";				//may need an AND Due_Date is some kind of close to the current date				$today = date('Y-m-d');				$NotComplete = "No";				$query = "SELECT * FROM Assignments WHERE User_ID = '$username' AND Due_Date = '$today' AND Completion = 'No'";				if($result = $link->query($query))					{					}				else					{						echo "Error retrieving information from CollegeBytes database: " . mysqli_error()."<br>";					}					//to set up heading				echo "<table id='Grid' style='width: 80%'><tr>";				echo "<th style='width: 50px'>Ass Name</th>";				echo "<th style='width: 50px'>Class</th>";				echo "<th style='width: 50px'>Due</th>";				echo "<th style='width: 50px'>Type</th>";				echo "</tr>\n";				//loop to display rows				while($row = mysqli_fetch_assoc($result))				{					echo "<tr>"; //literally the name in the databbase					echo "<td>" . $row["Assignment_Name"] . "</td>";					echo "<td>" . $row["Class_Name"] . "</td>";					echo "<td>" . $row["Due_Date"] . "</td>";					echo "<td>" . $row["Grade_Type"] . "</td>";					echo "<form name = 'view' id = 'view' action = 'editassignment.php' method ='post'><td> <input type='submit' name= 'className' value= 'Edit' /></td></form>";										echo "</td></tr>\n";				}				echo "</table>";				$link->close();			?>			</div>		</div>			</main>	<footer>	<a href = '#top'>Back To Top</a>	</footer>		</body></html>